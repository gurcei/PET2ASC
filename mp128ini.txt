0 REM MEDIA PLAYER 128 (C)2010,2011,2012 ROBERT WILLIE <HYDRADIX@YAHOO.COM>10 POKE47,0:POKE48,208:CLR:GRAPHICCLR:REM INIT VARS AT $D000+20 I=0:X=0:Y=0:Q=0:M$="":IX=0:IY=0:IC=0:IT=0:YC=0:C=0:YZ=13:Q$=""30 BANK15:COLOR4,1:VM=PEEK(DEC("D7"))AND128:VT=20*VM/128:VW=VT*2+40:SO=-(VM=0):IW=2-SO:X$=CHR$(27):R4$=CHR$(13*SO):IFVMTHENFAST:ELSESLOW40 PRINT:PRINTTAB(VT)X$"@üMEDIA PLAYER 128 (C) HYDROPHILIC 2010-12":PRINT"VERSION 1.3.1 * ABSOLUTELY NO WARRANTY * SEE THE GNU GPL IN THE FILE 'COPYING'50 JI=DEC("E40"):JU=JI+3:JB=JU+3:SPRITE1,0,2,0,0,0,0:REM MOUSE/JOYSTICK DRIVER60 AI=DEC("C00"):AU=AI+3:JL=AU+3:AS=JL+3:AH=AS+3:REM 80-COLUMN ARROW70 HT=DEC("D86"):HF=HT-3:HD=HF-3:HN=DEC("1000"):HA=HN+1:POKE828,183:POKEHN,0:YZ=13:MW=0:MH=0:REM HIT TEST80 HL$="°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫":REM CRAZY SHORTCUTS FOR LIST90 A=HA:FORY=0TO(YZ-1)*2STEP2:FORX=0TOIW-1:POKEA,0:POKEA+1,ASC(MID$(HL$,1+Y+X,1)):POKEA+2,4+Y/2:POKEA+3,2+X*38:POKEA+4,5+Y/2:POKEA+5,PEEK(A+3)+30:A=A+6:NEXT:NEXT100 DIMKX(7),KY(7):KK$="ëù +-":FORI=1TO5:M$=MID$(KK$,I,1):POKEA,0:POKEA+1,ASC(M$):POKEA+2,25:POKEA+3,0:POKEA+4,26:POKEA+5,1:A=A+6:NEXT:POKEHN,(A-HA)/6110 KX(3)=-1:KX(4)=1:KY(1)=-1:KY(2)=1:KY(6)=YZ-1:KY(7)=1-YZ:OX=0:OY=4120 LM=0:FC=0:LC=0:IC=0:IN=0:ID=0:PC=0:PA=0:FX=0:FY=0:LX=0:LY=0:FT=0:LT=0:IT=0:IR=0:IP$="##### ################## #####í":REM ARRAY CONTROL, PRINT USING130 CY=DEC("EB"):CX=CY+1:WY=DEC("E5"):WX=WY+1:REM CHAR, WINDOW140 FI=DEC("800"):FS=FI+3:FJ=FS+3:FF=FJ+3:FP=FF+3:OI=32768:REM FILE HELP150 SU=PEEK(186):IFSU<4THENINPUT"UNIT? 8ùùù";SU160 FU=SU:SD=0:FD=0:SP$="":FP$=SP$:SK=-1:FK=-1:D1$="DIR":D2$="CBM":SR=1:FR=SR:GU=FU:GD=FD:GK=FK:GP$=FP$:GR=FR:REM UNIT, DRIVE/PART, PATH, PATH TYPE, PATH ROOT170 X1$=".M3U":X2$=".Õ3’":LI=0:LE=0:SM=0:LN$="":LR=1:E=0:E$="":EI$="":DC$="":DP$="":DA$="":VP$="":E8=0:E8$="":P8$="":REM PLAY LIST, DISK COMMAND, 1581 PATH180 FO=1:LO=0:FZ=100:LZ=199:PZ=9:DIMF%(FZ),S%(FZ),F$(FZ),T$(FZ):DIML%(LZ,1),L$(LZ),LP%(LZ),P$(PZ):FORI=1TOLZ:L%(I,1)=I:NEXT:REM DIR FILES AND PLAY LIST185 S=65360:REM SID CONFIG190 POKE157,128:IFPEEK(789)<>INT(JI/256)THENBEGIN:REM LOAD SYSTEM FILES200 PRINT"MOUSE IN PORT 1, JOYSTICK IN PORT 2210 BLOAD"JLOAD128.BIN",B0,U(SU):WI=DEC("1680"):WU=WI+5:PRINT:PRINT"USING ";:OPEN9,SU,15,"U0>":POKE284,SU:E=DS:CLOSE9:IFE=31THENPRINT"FAST SERIAL";:ELSEBEGIN213 SYSWI:OPEN9,SU,15:POKE163,0:SYS65478,,9:E=ST:Q=PEEK(163):SYS65484215 CLOSE9:IFE=0ANDQAND64THENPRINT"JIFFY DOS";:ELSEPRINT"KERNAL";:IFETHENSYSWU217 PRINT"; R.E.U. REQUIRED";:BEND220 BLOAD"MJ-DRIVE.BIN",B0,U(SU):SYSJI230 BLOAD"ARROW80.BIN",B0,U(SU):SYSAI240 BLOAD"FILE»ELP.BIN",B0,U(SU)250 BLOAD"MP128.BIN",B0,U(SU):BANK0:SYSDEC("6403"):BANK15260 BEND270 DLOAD"MP128GUI.BAS",U(SU)